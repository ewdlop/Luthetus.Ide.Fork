<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Luthetus.Ide: Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Luthetus.Ide<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_interfaces_1_1_i_scope.html','','interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_interfaces_1_1_i_scope-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope Interface Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope:</div>
<div class="dyncontent">
<div class="center"><img src="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_interfaces_1_1_i_scope__inherit__graph.png" border="0" usemap="#a_luthetus_8_text_editor_8_razor_lib_8_compiler_services_8_interfaces_8_i_scope_inherit__map" loading="lazy" alt="Inheritance graph"/></div>
<map name="a_luthetus_8_text_editor_8_razor_lib_8_compiler_services_8_interfaces_8_i_scope_inherit__map" id="a_luthetus_8_text_editor_8_razor_lib_8_compiler_services_8_interfaces_8_i_scope_inherit__map">
<area shape="rect" title=" " alt="" coords="43,5,254,64"/>
<area shape="rect" href="struct_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_implementations_1_1_scope.html" title=" " alt="" coords="5,112,292,155"/>
<area shape="poly" title=" " alt="" coords="151,79,151,112,146,112,146,79"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-properties" class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ac864a69c5039a944689ef6e02d803e3a" id="r_ac864a69c5039a944689ef6e02d803e3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_syntax_1_1_nodes_1_1_fbb89b74d57a0670c22846a0a2d85ed6.html">ICodeBlockOwner</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac864a69c5039a944689ef6e02d803e3a">CodeBlockOwner</a><code> [get]</code></td></tr>
<tr class="memdesc:ac864a69c5039a944689ef6e02d803e3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is believed to be far better than a <a class="el" href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_syntax_1_1_i_syntax_node.html">ISyntaxNode</a> having a pointer to its parent.  <br /></td></tr>
<tr class="memitem:a61522fba59477beb1f3cafe27c43cb9c" id="r_a61522fba59477beb1f3cafe27c43cb9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61522fba59477beb1f3cafe27c43cb9c">IndexKey</a><code> [get]</code></td></tr>
<tr class="memdesc:a61522fba59477beb1f3cafe27c43cb9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">All scopes in a file are stored in a flat list, grouped by the ResourceUri they were found in. Everytime a scope is instantiated, it gets an incrementing counter as its IndexKey (which is equal to the index it was inserted at... 'list.Count').  <br /></td></tr>
<tr class="memitem:abfaa5ee6ee4ef26f6072fc309d244d71" id="r_abfaa5ee6ee4ef26f6072fc309d244d71"><td class="memItemLeft" align="right" valign="top">int?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abfaa5ee6ee4ef26f6072fc309d244d71">ParentIndexKey</a><code> [get]</code></td></tr>
<tr class="memitem:a7e7db70d787bcdb4c9ffd3d5f11f9ca4" id="r_a7e7db70d787bcdb4c9ffd3d5f11f9ca4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7e7db70d787bcdb4c9ffd3d5f11f9ca4">StartingIndexInclusive</a><code> [get]</code></td></tr>
<tr class="memitem:a3aafa57351a91d8b8be8f76045501186" id="r_a3aafa57351a91d8b8be8f76045501186"><td class="memItemLeft" align="right" valign="top">int?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3aafa57351a91d8b8be8f76045501186">EndingIndexExclusive</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a3aafa57351a91d8b8be8f76045501186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Beware of this property's setter, as a hack to set the ending index later on in this type's lifecycle because it isn't immediately known.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_i_scope_8cs_source.html#l00009">9</a> of file <a class="el" href="_i_scope_8cs_source.html">IScope.cs</a>.</p>
</div><a name="doc-property-members" id="doc-property-members"></a><h2 id="header-doc-property-members" class="groupheader">Property Documentation</h2>
<a id="ac864a69c5039a944689ef6e02d803e3a" name="ac864a69c5039a944689ef6e02d803e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac864a69c5039a944689ef6e02d803e3a">&#9670;&#160;</a></span>CodeBlockOwner</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_syntax_1_1_nodes_1_1_fbb89b74d57a0670c22846a0a2d85ed6.html">ICodeBlockOwner</a> Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope.CodeBlockOwner</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel get">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is believed to be far better than a <a class="el" href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_syntax_1_1_i_syntax_node.html">ISyntaxNode</a> having a pointer to its parent. </p>
<p>(i.e.: with this the <a class="el" href="namespace_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_syntax_1_1_nodes.html">Nodes</a> can be left as a singly linked tree.)</p>
<p>Then, one can query the <a class="el" href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_interfaces_1_1_i_binder.html">IBinder</a> to determine what the active scope is given a positionIndex within a file, or etc...</p>
<p>This scope struct then acts as an index into the compilation unit's node tree.</p>
<p>If a scope contains 100 nodes, then 100 pointers would have previously been needed due to 1 per node.</p>
<p>By having the 'Scope' contain a pointer to a node, the same example only requires 1 pointer to the node that created the scope.</p>
<p>From there, traversal down the tree is done with <a class="el" href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_syntax_1_1_i_syntax_node.html#a73d81f1c4e42db7e80bfdd4db97c10fe">ISyntaxNode.GetChildList()</a>;</p>
<p>Traversal up the tree is done by reading from the <a class="el" href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_interfaces_1_1_i_binder_session.html" title="The CSharpBinder is being instantiated, then re-used many times foreach C# resource....">IBinderSession</a> inside the IBinderSession.ScopeList at index ParentIndexKey.</p>
<p>This tells you the node that owns the parent scope.</p>
<p>If it turns out that this is too cumbersome to use in practice then perhaps a different solution should be considered. </p>

<p>Implemented in <a class="el" href="struct_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_implementations_1_1_scope.html#a987feea04974b183f1e6d4dcf04894de">Luthetus.TextEditor.RazorLib.CompilerServices.Implementations.Scope</a>.</p>

<p class="definition">Definition at line <a class="el" href="_i_scope_8cs_source.html#l00037">37</a> of file <a class="el" href="_i_scope_8cs_source.html">IScope.cs</a>.</p>

</div>
</div>
<a id="a3aafa57351a91d8b8be8f76045501186" name="a3aafa57351a91d8b8be8f76045501186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aafa57351a91d8b8be8f76045501186">&#9670;&#160;</a></span>EndingIndexExclusive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int? Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope.EndingIndexExclusive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel get">get</span><span class="mlabel set">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Beware of this property's setter, as a hack to set the ending index later on in this type's lifecycle because it isn't immediately known. </p>

<p>Implemented in <a class="el" href="struct_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_implementations_1_1_scope.html#a9596716656a60b22ba986b427319b22a">Luthetus.TextEditor.RazorLib.CompilerServices.Implementations.Scope</a>.</p>

<p class="definition">Definition at line <a class="el" href="_i_scope_8cs_source.html#l00082">82</a> of file <a class="el" href="_i_scope_8cs_source.html">IScope.cs</a>.</p>

</div>
</div>
<a id="a61522fba59477beb1f3cafe27c43cb9c" name="a61522fba59477beb1f3cafe27c43cb9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61522fba59477beb1f3cafe27c43cb9c">&#9670;&#160;</a></span>IndexKey</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope.IndexKey</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel get">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>All scopes in a file are stored in a flat list, grouped by the ResourceUri they were found in. Everytime a scope is instantiated, it gets an incrementing counter as its IndexKey (which is equal to the index it was inserted at... 'list.Count'). </p>
<p>Therefore, to go to the parent scope: 'var parentScope = list[ParentIndexKey]' To get "yourself": 'var selfScope = list[IndexKey]'</p>
<p>Every time the file is parsed the counter resets to 0.</p>
<p>In the future there should be optimizations that don't reparse the entire file, but instead only the scopes that need to be re-parsed given the change made.</p>
<p>This shouldn't be an issue beyond integer overflow. And to in the future solve the integer overflow, in the rare case that someone parses int.MaxValue number of scopes in a singular C# ResourceUri they likely don't actually have that many scopes in the file, but instead hit that number due to the future optimization that wasn't reseting the counter. Then that would trigger a counter reset to 0, and the entire file would have to be reparsed for that edge case.</p>
<p>If a file needs int.MaxValue number of scopes during a fresh parse with the counter starting at 0, then I presume this code will throw an exception.</p>
<p>But wouldn't it just the same do so with the previous code once the list of scopes hit a count &gt; int.MaxValue?</p>
<p>If it turns out that int.MaxValue is an issue, the storage of scopes needs to be re-worked. But it isn't expected to be the case.</p>
<p>Side note: in order to avoid race conditions involving out dated data, should the list itself have an int associated with it, that the <a class="el" href="_i_scope_8cs.html">IScope.cs</a> has as a property, so it can verify that the "batch id" is the same. </p>

<p>Implemented in <a class="el" href="struct_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_implementations_1_1_scope.html#a04a947ddeab9d6ca90394113f40afd78">Luthetus.TextEditor.RazorLib.CompilerServices.Implementations.Scope</a>.</p>

<p class="definition">Definition at line <a class="el" href="_i_scope_8cs_source.html#l00073">73</a> of file <a class="el" href="_i_scope_8cs_source.html">IScope.cs</a>.</p>

</div>
</div>
<a id="abfaa5ee6ee4ef26f6072fc309d244d71" name="abfaa5ee6ee4ef26f6072fc309d244d71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfaa5ee6ee4ef26f6072fc309d244d71">&#9670;&#160;</a></span>ParentIndexKey</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int? Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope.ParentIndexKey</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel get">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p>Implemented in <a class="el" href="struct_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_implementations_1_1_scope.html#aebbd763d50ce5b2f6d2d4231a270f718">Luthetus.TextEditor.RazorLib.CompilerServices.Implementations.Scope</a>.</p>

<p class="definition">Definition at line <a class="el" href="_i_scope_8cs_source.html#l00075">75</a> of file <a class="el" href="_i_scope_8cs_source.html">IScope.cs</a>.</p>

</div>
</div>
<a id="a7e7db70d787bcdb4c9ffd3d5f11f9ca4" name="a7e7db70d787bcdb4c9ffd3d5f11f9ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e7db70d787bcdb4c9ffd3d5f11f9ca4">&#9670;&#160;</a></span>StartingIndexInclusive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Luthetus.TextEditor.RazorLib.CompilerServices.Interfaces.IScope.StartingIndexInclusive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel get">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="struct_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_implementations_1_1_scope.html#aed1dfed81e67665c03b198b28a64469f">Luthetus.TextEditor.RazorLib.CompilerServices.Implementations.Scope</a>.</p>

<p class="definition">Definition at line <a class="el" href="_i_scope_8cs_source.html#l00076">76</a> of file <a class="el" href="_i_scope_8cs_source.html">IScope.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>Source/Lib/TextEditor/CompilerServices/Interfaces/<a class="el" href="_i_scope_8cs_source.html">IScope.cs</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespace_luthetus.html">Luthetus</a></li><li class="navelem"><a href="namespace_luthetus_1_1_text_editor.html">TextEditor</a></li><li class="navelem"><a href="namespace_luthetus_1_1_text_editor_1_1_razor_lib.html">RazorLib</a></li><li class="navelem"><a href="namespace_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services.html">CompilerServices</a></li><li class="navelem"><a href="namespace_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_interfaces.html">Interfaces</a></li><li class="navelem"><a href="interface_luthetus_1_1_text_editor_1_1_razor_lib_1_1_compiler_services_1_1_interfaces_1_1_i_scope.html">IScope</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
